<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Aromix | Perfume Store</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/user-css/landingPage.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>

  <%- include('./partials/header') %>

  <main>
    <!-- Hero Banner -->
    <section class="text-center bg-light">
      <img src="/images/banner.png" alt="Perfume Banner" class="img-fluid rounded-bottom" />
    </section>

    <!-- Intro Message -->
    <section class="text-center bg-warning py-4">
      <div class="container">
        <p class="mb-2 fs-5">
          Discover an exquisite collection of perfumes from iconic brands like Chanel, Dior, Gucci, Tom Ford, and more.
        </p>
        <a href="/users-products/discover" class="btn btn-dark">Discover All</a>
      </div>
    </section>

    <!-- Shop by Brand -->
    <section class="text-center py-5">
      <h3 class="fw-bold">SHOP BY BRAND</h3>
      <div class="d-flex justify-content-center gap-5 my-3">
        <img src="/images/tomford.png" alt="Tom Ford" />
        <img src="/images/gucci.png" alt="Gucci" />
        <img src="/images/dior.png" alt="Dior" />
      </div>
    </section>

    <!-- Top Buying Perfumes -->
    <section class="container py-5">
      <h3 class="text-center fw-bold mb-4">Top Buying Perfumes</h3>

      <% if (perfumes.length === 0) { %>
        <div class="alert alert-warning text-center w-100" role="alert">
          No products are available at the moment.
        </div>
      <% } else { %>
        <div class="row row-cols-1 row-cols-md-4 g-4">
          <% perfumes.forEach(p => { %>
            <div class="col">
              <a href="/users-products/products/<%= p._id %>" class="text-decoration-none text-dark">
                <div class="card h-100 position-relative">
                  
                  <% if (p.offer) { %>
                    <!-- Offer Badge -->
                    <span class="badge bg-danger position-absolute top-0 start-0 m-2 fs-6">
                      <%= p.offer %>% OFF
                    </span>
                  <% } %>

                  <!-- Product Image -->
                  <img src="<%= p.image %>" class="card-img-top" alt="<%= p.name %>">

                  <div class="card-body text-center">
                    <h5 class="card-title fw-bold"><%= p.name %></h5>
                    <p class="mb-1"><%= p.volume %> ml</p>

                    <% if (p.offer) { %>
                      <% 
                        const discountedPrice = p.price - (p.price * (p.offer / 100));
                      %>
                      <!-- Price with Offer -->
                      <p class="mb-0">
                        <span class="text-muted text-decoration-line-through me-2">₹<%= p.price %></span>
                        <span class="fw-bold text-success fs-5">₹<%= discountedPrice.toFixed(2) %></span>
                      </p>
                    <% } else { %>
                      <!-- Price without Offer -->
                      <p class="fw-bold fs-5">₹<%= p.price %></p>
                    <% } %>
                  </div>
                </div>
              </a>
            </div>
          <% }) %>
        </div>
      <% } %>
    </section>

    <!-- New Launch -->
    <section class="text-center py-5 bg-dark text-white">
      <h3>New Launch</h3>
      <img src="/images/sauvage-launch.png" class="img-fluid rounded mt-3" alt="New Launch Perfume" />
      <p class="mt-3">Dior Sauvage is a flagship fragrance launched in 2015 with a bold composition, spicy Sichuan pepper, and warm amberwood.</p>
    </section>
  </main>

  <%- include('./partials/footer') %>

  <script>
    // if (window.history.replaceState) {
    //   window.history.replaceState(null, '', window.location.pathname);
    // }

    window.addEventListener("pageshow", function (event) {
    if (event.persisted) {
      window.location.reload();
      }
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>